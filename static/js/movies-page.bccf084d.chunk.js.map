{"version":3,"sources":["refs.js","views/MoviesPage.js"],"names":["refs","previousLocation","searchQuery","MoviesPage","state","movies","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","searchMovie","a","this","Axios","get","response","props","location","data","results","match","onSubmit","className","type","autoComplete","autoFocus","placeholder","onChange","map","movie","to","pathname","url","id","src","poster_path","alt","title","width","height","Component"],"mappings":"yIAKeA,IALF,CACXC,iBAAkB,GAClBC,YAAa,K,kJCITC,E,4MACJC,MAAQ,CACNC,OAAQ,GACRC,MAAO,I,EAaTC,aAAe,SAACC,GACd,EAAKC,SAAS,CAAEH,MAAOE,EAAEE,cAAcC,S,EAGzCC,aAAe,SAACJ,GACdA,EAAEK,iBACF,EAAKJ,SAAS,CAAEH,MAAOE,EAAEE,cAAcC,QACvC,EAAKG,cACL,EAAKL,SAAS,CAAEH,MAAO,M,8FAlBzB,sBAAAS,EAAA,yDAC2B,KAArBf,IAAKE,YADX,gCAEUc,KAAKP,SAAS,CAAEH,MAAON,IAAKE,cAFtC,OAGIc,KAAKF,cACLE,KAAKP,SAAS,CAAEH,MAAO,KAJ3B,gG,sHAqBA,8BAAAS,EAAA,6DACUT,EAAUU,KAAKZ,MAAfE,MADV,SAEyBW,IAAMC,IAAN,0DAC8BZ,EAD9B,oBA/Bf,mCA+Be,+CAFzB,OAEQa,EAFR,OAKEnB,IAAKC,iBAAmBe,KAAKI,MAAMC,SACnCrB,IAAKE,YAAcI,EAEnBU,KAAKP,SAAS,CAAEJ,OAAQc,EAASG,KAAKC,UARxC,gD,0EAWA,WACE,IAAQC,EAAUR,KAAKI,MAAfI,MAER,OACE,qCACE,uBAAMC,SAAUT,KAAKJ,aAAcc,UAAU,OAA7C,UACE,uBACEC,KAAK,OACLhB,MAAOK,KAAKZ,MAAME,MAClBsB,aAAa,MACbC,WAAS,EACTC,YAAY,gBACZC,SAAUf,KAAKT,eAEjB,wBAAQoB,KAAK,SAASD,UAAU,WAAhC,uBAKF,qBAAKA,UAAU,eAAf,SACE,oBAAIA,UAAU,cAAd,SACGV,KAAKZ,MAAMC,OAAO2B,KAAI,SAACC,GAAD,OACrB,oBAAmBP,UAAU,cAA7B,SACE,eAAC,IAAD,CACEQ,GAAI,CACFC,SAAS,GAAD,OAAKX,EAAMY,IAAX,YAAkBH,EAAMI,KAFpC,UAKE,qBACEC,IAAG,yCAAoCL,EAAMM,aAC7CC,IAAKP,EAAMQ,MACXC,MAAM,MACNC,OAAO,QAERV,EAAMQ,UAZFR,EAAMI,kB,GA5DJO,aAmFVzC","file":"static/js/movies-page.bccf084d.chunk.js","sourcesContent":["const refs = {\r\n  previousLocation: {},\r\n  searchQuery: \"\",\r\n};\r\n\r\nexport default refs;\r\n","import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport refs from \"../refs\";\r\nconst KEY = \"478a6293c6d1ac9e31348f3204c340c0\";\r\n\r\nclass MoviesPage extends Component {\r\n  state = {\r\n    movies: [],\r\n    query: \"\",\r\n  };\r\n\r\n  async componentDidMount() {\r\n    if (refs.searchQuery !== \"\") {\r\n      await this.setState({ query: refs.searchQuery });\r\n      this.searchMovie();\r\n      this.setState({ query: \"\" });\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ query: e.currentTarget.value });\r\n    this.searchMovie();\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  async searchMovie() {\r\n    const { query } = this.state;\r\n    const response = await Axios.get(\r\n      `https://api.themoviedb.org/3/search/movie?query=${query}&api_key=${KEY}&language=en-US&page=1&include_adult=false`\r\n    );\r\n    refs.previousLocation = this.props.location;\r\n    refs.searchQuery = query;\r\n\r\n    this.setState({ movies: response.data.results });\r\n  }\r\n\r\n  render() {\r\n    const { match } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <form onSubmit={this.handleSubmit} className=\"form\">\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.query}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search movies\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <button type=\"submit\" className=\"form-btn\">\r\n            Search\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"movies-block\">\r\n          <ul className=\"movies-list\">\r\n            {this.state.movies.map((movie) => (\r\n              <li key={movie.id} className=\"movies-item\">\r\n                <Link\r\n                  to={{\r\n                    pathname: `${match.url}/${movie.id}`,\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={`https://image.tmdb.org/t/p/w500${movie.poster_path}`}\r\n                    alt={movie.title}\r\n                    width=\"150\"\r\n                    height=\"150\"\r\n                  />\r\n                  {movie.title}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}